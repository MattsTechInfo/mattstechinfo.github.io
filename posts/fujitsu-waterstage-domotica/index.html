<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Fujitsu Waterstage home automation/domotica" /><meta property="og:locale" content="en" /><meta name="description" content="Introduction About three years ago our house was fitted with a Fujitsu Waterstage heat pump and boiler for central heating and domestic hot water (DHW). This allowed us to go electric only and close off the gas connection to our house. Right from the start, the company that installed our Fujitsu Waterstage promised it supported connectivity to be included in home automation (or as we call it in Dutch, domotica). However, after asking around and consulting Fujitsu in The Netherlands, we came to the conclusion that it was (I quote) “Not possible” and “Not supported”. I kept an eye open during the years and finally, after I actually opened up the Fujitsu Waterstage internal unit, I got a new lead that proved to be the solution!" /><meta property="og:description" content="Introduction About three years ago our house was fitted with a Fujitsu Waterstage heat pump and boiler for central heating and domestic hot water (DHW). This allowed us to go electric only and close off the gas connection to our house. Right from the start, the company that installed our Fujitsu Waterstage promised it supported connectivity to be included in home automation (or as we call it in Dutch, domotica). However, after asking around and consulting Fujitsu in The Netherlands, we came to the conclusion that it was (I quote) “Not possible” and “Not supported”. I kept an eye open during the years and finally, after I actually opened up the Fujitsu Waterstage internal unit, I got a new lead that proved to be the solution!" /><link rel="canonical" href="https://mattstech.info/posts/fujitsu-waterstage-domotica/" /><meta property="og:url" content="https://mattstech.info/posts/fujitsu-waterstage-domotica/" /><meta property="og:site_name" content="Matts’ Tech Info" /><meta property="og:image" content="https://mattstech.info/assets/img/posts/headers/fujitsu-waterstage-domotica.jpg" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-07-02T19:25:11+02:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://mattstech.info/assets/img/posts/headers/fujitsu-waterstage-domotica.jpg" /><meta property="twitter:title" content="Fujitsu Waterstage home automation/domotica" /><meta name="twitter:site" content="@MattsTechInfo" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-09-11T19:26:40+02:00","datePublished":"2022-07-02T19:25:11+02:00","description":"Introduction About three years ago our house was fitted with a Fujitsu Waterstage heat pump and boiler for central heating and domestic hot water (DHW). This allowed us to go electric only and close off the gas connection to our house. Right from the start, the company that installed our Fujitsu Waterstage promised it supported connectivity to be included in home automation (or as we call it in Dutch, domotica). However, after asking around and consulting Fujitsu in The Netherlands, we came to the conclusion that it was (I quote) “Not possible” and “Not supported”. I kept an eye open during the years and finally, after I actually opened up the Fujitsu Waterstage internal unit, I got a new lead that proved to be the solution!","headline":"Fujitsu Waterstage home automation/domotica","image":"https://mattstech.info/assets/img/posts/headers/fujitsu-waterstage-domotica.jpg","mainEntityOfPage":{"@type":"WebPage","@id":"https://mattstech.info/posts/fujitsu-waterstage-domotica/"},"url":"https://mattstech.info/posts/fujitsu-waterstage-domotica/"}</script><title>Fujitsu Waterstage home automation/domotica | Matts' Tech Info</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Matts' Tech Info"><meta name="application-name" content="Matts' Tech Info"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script async src="https://stats.mattstech.info/visitors" data-website-id="6b086229-ba9b-48e4-970c-e94e6bef8b8e"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/logo-white-bg.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Matts' Tech Info</a></div><div class="site-subtitle font-italic">Sharing about all things tech!</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>BLOG</span> </a><li class="nav-item"> <a href="/projects/" class="nav-link"> <i class="fa-fw fas fa-cubes ml-xl-3 mr-xl-3 unloaded"></i> <span>PROJECTS</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/MattsTechInfo" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://discord.gg/v8Bwbnb3xe" aria-label="discord" target="_blank" rel="noopener"> <i class="fab fa-discord"></i> </a> <a href="https://twitter.com/MattsTechInfo" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href="/feed.xml" aria-label="rss" target="_blank" rel="noopener"> <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Blog </a> </span> <span>Fujitsu Waterstage home automation/domotica</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Fujitsu Waterstage home automation/domotica</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1656782711" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jul 2, 2022 </em> </span> <span> Updated <em class="" data-ts="1662917200" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Sep 11, 2022 </em> </span><div class="mt-3 mb-3"> <img data-src="/assets/img/posts/headers/fujitsu-waterstage-domotica.jpg" class="preview-img bg" alt="Preview Image" data-proofer-ignore></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/MattsBos">Matts Bos</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3860 words"> <em>21 min</em> read</span></div></div></div><div class="post-content"><h2 id="introduction"><span class="mr-2">Introduction</span><a href="#introduction" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>About three years ago our house was fitted with a Fujitsu Waterstage heat pump and boiler for central heating and domestic hot water (DHW). This allowed us to go electric only and close off the gas connection to our house. Right from the start, the company that installed our Fujitsu Waterstage promised it supported connectivity to be included in home automation (or as we call it in Dutch, domotica). However, after asking around and consulting Fujitsu in The Netherlands, we came to the conclusion that it was (I quote) “Not possible” and “Not supported”. I kept an eye open during the years and finally, after I actually opened up the Fujitsu Waterstage internal unit, I got a new lead that proved to be the solution!</p><h2 id="enter-bsb-lan"><span class="mr-2">Enter BSB-LAN</span><a href="#enter-bsb-lan" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>The Fujitsu Waterstage unit I have uses a mainboard from SIEMENS systems. These SIEMENS mainboards generally use the same communication protocols internally, which means someone might already have something made for this. After some more searching it appears a huge amount of brands use these SIEMENS boards, more importantly, they all use the same protocol, the <code class="language-plaintext highlighter-rouge">Boiler System Bus (BSB)</code>. This information lead me to a German project on GitHub for heat pumps running not only the BSB protocol but also the <code class="language-plaintext highlighter-rouge">Local Process Bus (LPB)</code> and the German <code class="language-plaintext highlighter-rouge">Punkt-zu-Punkt-Schnittstelle (PPS)</code> protocols. Please see the excellent project by <a href="https://github.com/fredlcore" target="_blank" rel="noopener noreferrer">fredlcore ⧉</a> called <a href="https://github.com/fredlcore/BSB-LAN" target="_blank" rel="noopener noreferrer">BSB-LAN ⧉</a>. They have an extensive list of supported heat pumps and HVACs, great documentation and are very helpful!<br /> I have also bought an assembled BSB-LAN interface board from them, but you can build it yourself if you would want to.</p><h2 id="guide"><span class="mr-2">Guide</span><a href="#guide" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>The following parts will explain what I have done to include the Fujitsu Waterstage into my home automation set up. There are many ways to do it, with different hardware, different heat pumps and systems, etc. Since I’m using Grafana for all my home automation dashboards to monitor, that’s my main goal at this point in time. This includes having the virtual status screen that’s on the Fujitsu Waterstage to keep me from having to walk up the attic and physically read what’s happening.</p><blockquote class="prompt-info"><div><p>The following steps in this guide have all been done on a Windows machine and using the Olimex ESP32. Things may be (slightly) different for you depending on your choice of hardware and OS. Also please keep in mind that not all heat pumps are the same, values can be programmed differently, always make sure your heat pump is supported, this guide is not universal.</p></div></blockquote><blockquote class="prompt-warning"><div><p>This guide is based on release version 2.0 of BSB-LAN. Please make sure to use the latest version of the config file if a new version is released while following this guide. Do not copy the example config file unless you run release version 2.0.</p></div></blockquote><h3 id="goals"><span class="mr-2">Goals</span><a href="#goals" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>This guide will explain the following:</p><ul><li>Identify the heat pump.<li>Get the required hardware and software.<li>Prepare Arduino IDE project for ESP32.<li>Configure BSB-LAN software.<ul><li>(Optional) Configure logging to MQTT.</ul><li>Flash the ESP32.<li>Connect the BSB-LAN board to the Fujitsu Waterstage.<li>Get access to the BSB-LAN web interface.<li>Scan the heat pump values to get started.<li>How to use.</ul><h3 id="identify"><span class="mr-2">Identify</span><a href="#identify" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><img data-src="/assets/img/posts/fujitsu-waterstage-domotica/mainboard-version.png" alt="SIEMENS mainboard RVS21" style="max-width: 300px" class="right" data-proofer-ignore> Before you can do anything, please make sure your heat pump is supported by BSB-LAN. My Fujitsu Waterstage has a mainboard from SIEMENS with type RVS21, which is on the BSB-LAN supported list. To see if your heat pump is supported please see <a href="https://1coderookie.github.io/BSB-LPB-LAN_EN/chap11.html" target="_blank" rel="noopener noreferrer">this page of the BSB-LAN documentation ⧉</a>. If your heat pump is not on the list, you can open up the internal unit and see if you can find the mainboard brand and type, mine had a sticker as shown in the image to the right. Remember that BSB is a protocol and is one of the main protocols used in the heat pump business, don’t be put off if your specific heat pump make and model is not on the list, there is a good chance the mainboard is supported and uses the BSB protocol like the others.</p><h3 id="requirements"><span class="mr-2">Requirements</span><a href="#requirements" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Before we continue, lets set up a list of requirements.</p><dl><dt>Supported heat pump<dd>Obviously, make sure your heat pump’s mainboard is supported by BSB-LAN as explained in the Identify section.<dt>BSB-LAN board<dd>The BSB-LAN board is the first piece of hardware required. It’s a custom made circuit board that connects to and interprets the BSB protocol. You can choose to build one yourself or ask fredlcore to buy one that’s already soldered and ready to run.<dt>Controller board<dd>To run the BSB-LAN software you need a controller board, again, these can be DIY’ed. I’ve gone with the preferred option mentioned in the BSB-LAN manual, the Olimex ESP32-EVB; I also went with the industrial grade (IND) version of it, just to be sure. You can choose whatever controller you like here according to the manual as long as it’s either Arduino Due or ESP32 based.<dt>(Optional) Micro SD-card<dd>The Olimex supports a Micro SD-card for storage, BSB-LAN can use this to plot graphs and history within the web interface. Not required if you don’t want to see the graphs and logs but you should as it’s best practice. (I’m not currently using this, bad!)<dt>Arduino IDE<dd>For compiling/flashing the software to the controller board. It should be possible to use Visual Studio Code, but I personally couldn’t get it to work yet with the Olimex build.<dt>Copper wire<dd>You need two copper wires to connect the BSB-LAN board to the heat pump mainboard. I’ve recycled two short lengths of electrical wire to connect it inside of the heat pump chassis. Please keep in mind that long lengths of wire will require thicker (higher diameter) copper wire to avoid loss of signal.<dt>Network<dd>To allow for communications I will be using WiFi, the Olimex also supports wired connectivity, I might set that up at a later time.<dt>(Optional) MQTT Server<dd>As I will log sensor data to MQTT, an MQTT server needs to be in place somewhere on the network. I already have an MQTT server running for other home automation tasks.</dl><h3 id="prepare-arduino-ide-for-esp32"><span class="mr-2">Prepare Arduino IDE for ESP32</span><a href="#prepare-arduino-ide-for-esp32" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><dl><dt>Step 1<dd>The first thing you want to do is get the latest BSB-LAN software from the GitHub repository. The manual actually recommends getting the latest release archive available using the following link <a href="https://github.com/fredlcore/BSB-LAN/archive/master.zip" target="_blank" rel="noopener noreferrer">BSB-LAN Master (.zip) ⧉</a>. All required files, for both the Arduino Due and ESP32, are in there. You can also use git if you prefer that option over the download. Extract/Clone it to a location of your preference.<dt>Step 2<dd>Before doing anything else, go to the location where the files are extracted/cloned and go into the <code class="language-plaintext highlighter-rouge">BSB-LAN-master/BSB_LAN/src</code> folder and remove the Arduino folders <code class="language-plaintext highlighter-rouge">ArduinoMDNS</code> and <code class="language-plaintext highlighter-rouge">WiFiSpi</code> as they are not required for the ESP32. Even better, they <strong>must</strong> be removed else you get build/compile errors.<dt>Step 3<dd>Go back up into the folder structure, <code class="language-plaintext highlighter-rouge">BSB-LAN-master/BSB_LAN</code> and find the file named <code class="language-plaintext highlighter-rouge">BSB_LAN_config.h.default</code>. Rename this file to <code class="language-plaintext highlighter-rouge">BSB_LAN_config.h</code>.<dt>Step 4<dd>Now it’s time to connect the ESP32 board to the computer using USB. You can choose to already have the BSB-LAN board installed on it or not, it doesn’t matter if it’s on or off since we are just flashing the code to the board at this stage. I had mine connected with the BSB-LAN board already attached.<dt>Step 5<dd>Go back to <code class="language-plaintext highlighter-rouge">BSB-LAN-master/BSB_LAN</code> and open up the file <code class="language-plaintext highlighter-rouge">BSB_LAN.ino</code>, Arduino IDE will start up and open the project, all files associated with the project will be opened up automatically.<dt>Step 6<dd><img data-src="/assets/img/posts/fujitsu-waterstage-domotica/boardmanager.png" alt="Boards Manager ESP32" style="max-width: 300px" class="right" data-proofer-ignore> Before configuring the Arduino IDE board for the project, verify if the ESP32 board variants version is <code class="language-plaintext highlighter-rouge">version 2.0.2</code> or higher, this can be checked in the Boards Manager at <code class="language-plaintext highlighter-rouge">Tools-&gt;Board-&gt;Boards manager...</code> . If it’s lower, install a higher version. <br /> If you do not see any ESP32 boards at all, go to <code class="language-plaintext highlighter-rouge">File-&gt;Preferences</code> in Arduino IDE and add the following URL to the “<em>Additional Boards Manager URLs</em>” field: <code class="language-plaintext highlighter-rouge">https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_index.json</code>. Press OK to save the changes and check the version to verify it worked in the Boards Manager. <img data-src="/assets/img/posts/fujitsu-waterstage-domotica/boardmanagerurl.png" alt="Boards Manager URL" data-proofer-ignore><dt>Step 7<dd>Next up are the project settings under <code class="language-plaintext highlighter-rouge">Tools</code> to make sure it matches with the ESP32 that’s being used. For me, this is an Olimex ESP32.<ul><li>Board: Olimex-ESP32-EVB<li>Upload Speed: 115200<li>Flash Frequency: 80MHz<li>Partition Scheme: Minimal SPIFFS (Large APPS with OTA)<li>Port: COM# (For Linux it will be something like /dev/ttyUSB#)</ul></dl><blockquote class="prompt-info"><div><p>If you can’t see the COM port on Windows, you might miss an essential driver, please click <a href="https://www.silabs.com/developers/usb-to-uart-bridge-vcp-drivers" target="_blank" rel="noopener noreferrer">this ⧉</a> link for driver info and download.</p></div></blockquote><h3 id="configure-bsb-lan-software"><span class="mr-2">Configure BSB-LAN software</span><a href="#configure-bsb-lan-software" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Having Arduino IDE completely set up and ready to go, it’s now time to start working with the actual BSB-LAN software. Like most, it needs to be configured. The bare minimum configuration requires the network settings, most other settings can be configured (after successful flashing) from the web interface. All initial configuration will be done in the file called <code class="language-plaintext highlighter-rouge">BSB_LAN_config.h</code>, the one that was renamed during an earlier step. The following steps will list all configuration changes I’ve done to enable all functionality I need.</p><blockquote class="prompt-info"><div><p>To view my complete config file, please click <a href="https://github.com/MattsTechInfo/kickstart/blob/main/home-automation/BSB-LAN/BSB_LAN_config.h" target="_blank" rel="noopener noreferrer">this ⧉</a> link to see my current (password redacted) config file in the kickstart repository on GitHub. Feel free to copy where needed.</p></div></blockquote><dl><dt>Enable WiFi<dd>To enable WiFi, not much is needed, all that’s required is to enable it in the config and set the SSID and Password. To enable WiFi, the <code class="language-plaintext highlighter-rouge">//#define WIFI</code> line needs to be uncommented. The WiFi part of the config file should look like this, replace the placeholder SSID and Password with your own.</dl><div file="BSB_LAN/BSB_LAN_config.h" class="language-objc highlighter-rouge"><div class="code-header"> <span data-label-text="BSB_LAN/BSB_LAN_config.h"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="cp">#define WIFI                            // Activate this definement if you want to use WiFi. Note: MAC address can't be set individually.
</span><span class="kt">char</span> <span class="n">wifi_ssid</span><span class="p">[</span><span class="mi">32</span><span class="p">]</span> <span class="o">=</span> <span class="s">"WiFi-network"</span><span class="p">;</span>    <span class="c1">// enter your WiFi network name (SSID) here</span>
<span class="kt">char</span> <span class="n">wifi_pass</span><span class="p">[</span><span class="mi">64</span><span class="p">]</span> <span class="o">=</span> <span class="s">"WiFi-password"</span><span class="p">;</span>   <span class="c1">// enter your WiFi password here</span>
<span class="cp">#define WIFI_SPI_SS_PIN 12              // defines SPI-SS pin for Arduino-ESP8266 connection
</span></pre></table></code></div></div><dl><dt>Change the language<dd>At the very top of the config file, the first configurable entry is the language. By default it’s set to German as most of the users and it’s creator are German speaking. Don’t be surprised not everything is translated to your language yet, if you feel like translating please let the people at BSB-LAN know! Mine is set to English.</dl><div file="BSB_LAN/BSB_LAN_config.h" class="language-objc highlighter-rouge"><div class="code-header"> <span data-label-text="BSB_LAN/BSB_LAN_config.h"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="cp">#define LANG EN
</span></pre></table></code></div></div><dl><dt>Enable EEPROM (Default)<dd>This is a very important setting, even though I did not change it, you should know what it does and what it means. BSB-LAN can write the running configuration to EEPROM and the next time it starts, it will load from EEPROM. This will bypass your <code class="language-plaintext highlighter-rouge">BSB_LAN_config.h</code> file but does allow you to configure on the fly from the web interface. If for any reason you lose EEPROM or it bricks, you will lose the changes compared to your <code class="language-plaintext highlighter-rouge">BSB_LAN_config.h</code> file used initially. You can disable EEPROM to always load from file, but that will require you to flash every time you do a configuration change or risk losing the changes you made through the web interface. I find using EEPROM is easier to work with.</dl><div file="BSB_LAN/BSB_LAN_config.h" class="language-objc highlighter-rouge"><div class="code-header"> <span data-label-text="BSB_LAN/BSB_LAN_config.h"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">byte</span> <span class="n">UseEEPROM</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</pre></table></code></div></div><dl><dt>Listening Port and DHCP/Static IPv4 config<dd>You can configure the port to anything you like over here, by default it’s on port 80 (HTTP) and that’s what I kept it at too. You can also set whether to use DHCP or not and if you don’t, declare network properties for static IPv4 configuration (IPv4, Gateway, DNS and Subnet). I’m using DHCP with reservations in my home-automation network.</dl><div file="BSB_LAN/BSB_LAN_config.h" class="language-objc highlighter-rouge"><div class="code-header"> <span data-label-text="BSB_LAN/BSB_LAN_config.h"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="kt">uint16_t</span> <span class="n">HTTPPort</span> <span class="o">=</span> <span class="mi">80</span><span class="p">;</span>
<span class="n">bool</span> <span class="n">useDHCP</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>                 <span class="c1">// Set to false if you want to use a fixed IP.</span>
<span class="n">byte</span> <span class="n">ip_addr</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">192</span><span class="p">,</span><span class="mi">168</span><span class="p">,</span><span class="mi">178</span><span class="p">,</span><span class="mi">88</span><span class="p">};</span>     <span class="c1">// Please note the commas instead of dots!!!  Set useDHCP to true if you want DHCP.</span>
<span class="n">byte</span> <span class="n">gateway_addr</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">192</span><span class="p">,</span><span class="mi">168</span><span class="p">,</span><span class="mi">178</span><span class="p">,</span><span class="mi">1</span><span class="p">};</span> <span class="c1">// Gateway address. This is usually your router's IP address. Please note the commas instead of dots!!! Ignored if first value is 0.</span>
<span class="n">byte</span> <span class="n">dns_addr</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">192</span><span class="p">,</span><span class="mi">168</span><span class="p">,</span><span class="mi">178</span><span class="p">,</span><span class="mi">1</span><span class="p">};</span>     <span class="c1">// DNS server. Please note the commas instead of dots!!! Ignored if first value is 0.</span>
<span class="n">byte</span> <span class="n">subnet_addr</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">};</span>  <span class="c1">// Subnet address. Please use commas instead of dots!!! Ignored if first value is 0.</span>
</pre></table></code></div></div><dl><dt>Enable the Logger<dd>As I’m interested in sending values/telemetry to my database via MQTT, the logger is required to enable this. I would actually recommend running a MicroSD-card to allow BSB-LAN to write the logs to and enable the SD option. As I’m currently running without an SD card I have that disabled but will 100% enable it in a future update as this is bad practice!</dl><div file="BSB_LAN/BSB_LAN_config.h" class="language-objc highlighter-rouge"><div class="code-header"> <span data-label-text="BSB_LAN/BSB_LAN_config.h"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="cp">#define LOGGER
</span>
<span class="c1">// Use SD card adapter on ESP32-based boards instead of SPIFFS flash-based storage</span>
<span class="c1">//#define ESP32_USE_SD</span>
</pre></table></code></div></div><dl><dt>Configure Log Parameters and interval<dd>Every heat pump has parameters, the numbers that represent a value or configuration setpoint. The log parameters in BSB-LAN directly translate to those of the heatpump. This means whatever parameter you enter here will be retrieved from the heat pump and written to log. During my testing I found that the maximum amount of parameters to log was set to 40, I needed more. Fortunately, the array can safely be increased from the config file. By default <code class="language-plaintext highlighter-rouge">log_parameters[40]</code>, I changed this to <code class="language-plaintext highlighter-rouge">log_parameters[100]</code>.<br /> One other important value is the interval at which these parameters will be polled (and sent to MQTT). The BSB protocol is low bitrate, which means very slow. Depending on how many parameters you want to log, adjust the interval accordingly. In my case of around 50 parameters to poll, I ended up with an interval of 30 seconds. Any faster will break as it will not finish polling all parameters before the interval kicks off again. Your results may vary.</dl><div file="BSB_LAN/BSB_LAN_config.h" class="language-objc highlighter-rouge"><div class="code-header"> <span data-label-text="BSB_LAN/BSB_LAN_config.h"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="n">bool</span> <span class="n">logCurrentValues</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>      <span class="c1">// Save data in datalog.txt on SD-card.</span>
<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">log_interval</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span>  <span class="c1">// Logging interval (to SD card and MQTT broker) in seconds</span>
<span class="kt">int</span> <span class="n">log_parameters</span><span class="p">[</span><span class="mi">100</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
  <span class="mi">8700</span><span class="p">,</span>                   <span class="c1">// Außentemperatur</span>
  <span class="mi">8743</span><span class="p">,</span>                   <span class="c1">// Vorlauftemperatur</span>
  <span class="mi">8314</span><span class="p">,</span>                   <span class="c1">// Rücklauftemperatur</span>
<span class="c1">//  20000,                  // Spezialparameter: Brenner-Laufzeit Stufe 1</span>
<span class="c1">//  20001,                  // Spezialparameter: Brenner-Takte Stufe 1</span>
<span class="c1">//  20002,                  // Spezialparameter: Brenner-Laufzeit Stufe 2</span>
<span class="c1">//  20003,                  // Spezialparameter: Brenner-Takte Stufe 2</span>
<span class="c1">//  20004,                  // Spezialparameter: TWW-Laufzeit</span>
<span class="c1">//  20005,                  // Spezialparameter: TWW-Takte</span>
<span class="c1">//  20050,                  // Spezialparameter 20050-20099: 24h-Durchschnittswerte</span>
<span class="c1">//  20100,                  // Spezialparameter 20100-20299: DHT22-Sensoren 1-50</span>
<span class="c1">//  20300                   // Spezialparameter 20300-20499: DS18B20-Sensoren 1-100</span>
<span class="c1">//  20500                   // Spezialparameter 20500-20699: MAX!-Sensoren 1-50</span>
<span class="p">};</span>
</pre></table></code></div></div><dl><dt>(Optional) Configuring MQTT<dd>The last change I made to the config file was to enable MQTT logging. All parameters that are logged are also sent to MQTT at the same interval when MQTT is enabled. What worked for me was to configure BSB-LAN MQTT messages for plain-text so I can pick them up using Node-Red. Set the <code class="language-plaintext highlighter-rouge">mqtt_mode = 0</code> to <code class="language-plaintext highlighter-rouge">1</code> for plain-text and supply the IP address of the MQTT broker to send the messages to. To keep things neat on the MQTT server I’ve also set a specific topic (BSB-LAN). Which makes my config file look like this:</dl><div file="BSB_LAN/BSB_LAN_config.h" class="language-objc highlighter-rouge"><div class="code-header"> <span data-label-text="BSB_LAN/BSB_LAN_config.h"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="cp">#define MQTT
</span><span class="n">byte</span> <span class="n">mqtt_mode</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// MQTT: 0 - disabled, 1 - send messages in plain text format, 2 - send messages in JSON format, 3 - send messages in rich JSON format. Use this if you want a json package of your logging information printed to the mqtt topic</span>
<span class="c1">// JSON payload will be of the structure: {"MQTTDeviceID": {"status":{"log_param1":"value1"}}}</span>
<span class="c1">// rich JSON payload will be of the structure: {"MQTTDeviceID": {"id": "parmeter number from log values", "name": "parameter name from logvalues", "value": "query result", "desc": "enum value description", "unit": "unit of measurement", "error", error code}}</span>
<span class="n">byte</span> <span class="n">mqtt_broker_ip_addr</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">192</span><span class="p">,</span><span class="mi">168</span><span class="p">,</span><span class="mi">55</span><span class="p">,</span><span class="mi">54</span><span class="p">};</span> <span class="c1">// MQTT broker ip address. Please use commas instead of dots!!!</span>
<span class="kt">char</span> <span class="n">MQTTUsername</span><span class="p">[</span><span class="mi">32</span><span class="p">]</span> <span class="o">=</span> <span class="s">""</span><span class="p">;</span>                 <span class="c1">// Set username for MQTT broker here or set empty string if no username/password is used.</span>
<span class="kt">char</span> <span class="n">MQTTPassword</span><span class="p">[</span><span class="mi">32</span><span class="p">]</span> <span class="o">=</span> <span class="s">""</span><span class="p">;</span>                 <span class="c1">// Set password for MQTT broker here or set empty string if no password is used.</span>
<span class="kt">char</span> <span class="n">MQTTTopicPrefix</span><span class="p">[</span><span class="mi">32</span><span class="p">]</span> <span class="o">=</span> <span class="s">"BSB-LAN"</span><span class="p">;</span> 	        <span class="c1">// Optional: Choose the "topic" for MQTT messages here. In case of empty string, default topic name will be used</span>

<span class="c1">// Optional: Define a device name to use as header in json payload. In case of empty string, "BSB-LAN" will be used.</span>
<span class="c1">// This value is also used as a client ID towards the MQTT broker, change it if you have more than one BSB-LAN on your broker.</span>
<span class="kt">char</span> <span class="n">MQTTDeviceID</span><span class="p">[</span><span class="mi">32</span><span class="p">]</span> <span class="o">=</span> <span class="s">"BSB-LAN"</span><span class="p">;</span>
</pre></table></code></div></div><h3 id="flash-the-esp32"><span class="mr-2">Flash the ESP32</span><a href="#flash-the-esp32" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>With both Arduino IDE and BSB-LAN software set up and configured lets flash everything to the ESP32. From Arduino IDE select <code class="language-plaintext highlighter-rouge">Sketch-&gt;Upload</code> and things should be underway. Immediately after open the Serial monitor under <code class="language-plaintext highlighter-rouge">Tools-&gt;Serial Monitor</code> to see the feedback from the ESP32 during startup. If everything goes according to plan it will show the IP address that was assigned by DHCP (if you are using that) and it can be accessed through the web interface on the configured IP.</p><blockquote class="prompt-tip"><div><p>If the ESP32 has problems connecting to the configured network it will set up a local SSID called “BSB-LAN”. If you see this happening you will need to verify your config and network and reflash. BSB-LAN is configured to broadcast this SSID for 30 minutes and then reboot and repeat.</p></div></blockquote><h3 id="connect-bsb-lan-to-fujitsu"><span class="mr-2">Connect BSB-LAN to Fujitsu</span><a href="#connect-bsb-lan-to-fujitsu" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><img data-src="/assets/img/posts/fujitsu-waterstage-domotica/mainboard-x86.png" alt="Mainboard X86" style="max-width: 300px" class="right" data-proofer-ignore> Now that everything is up and running on the device and network side, it’s time to connect the BSB-LAN board connectors to the heat pump’s systems. For SIEMENS RVS21 boards there is one specific connector we require to gain access to the BSB systems and allow communication. This port is the <code class="language-plaintext highlighter-rouge">X86</code> which, as far as I know, is always green and at the bottom of the board.</p><p>From the manual of the Fujitsu Waterstage it becomes clear which pins we need, as BSB-LAN acts as if it’s a thermostat. I’ve included a picture from the manual to make sure we’re talking about the same thing.<img data-src="/assets/img/posts/fujitsu-waterstage-domotica/board-manual.png" alt="Mainboard X86 Manual" style="max-width: 300px" class="right" data-proofer-ignore> As you can see devices are to be connected to pins 4, 5 and 6 on the X86 connector to be functional. Pin 4 is not to be used as it serves as an optional power supply to the thermostat or as power supply to the wireless thermostat device. So for BSB-LAN we need to connect pins 5 and 6. Although it does not mention in the manual, I’ve found out that pin 5 is <code class="language-plaintext highlighter-rouge">CL-</code> and pin 6 is <code class="language-plaintext highlighter-rouge">CL+</code>. On the BSB-LAN board you will find the connector closest to the LED is <code class="language-plaintext highlighter-rouge">CL+</code> and the one furthest away is <code class="language-plaintext highlighter-rouge">CL-</code>, it also shows this printed on the circuit board. Connect CL- to CL- and CL+ to CL+ and we’re done.</p><p>Now plug in the USB power and it will start booting. <img data-src="/assets/img/posts/fujitsu-waterstage-domotica/connected.png" alt="Mainboard X86 Manual" data-proofer-ignore></p><h3 id="access-web-interface-and-scan"><span class="mr-2">Access web interface and scan</span><a href="#access-web-interface-and-scan" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>With everything connected and running, go to your favorite webbrowser and go to the IP address of the BSB-LAN device. Depending on whether you configured a password or not you will reach the home page of BSB-LAN. The first thing you should do is allow BSB-LAN to scan the heat pump for available parameters. To do this, go to the following URL and <strong>be patient</strong> as it will take quite some time to complete the scan: <code class="language-plaintext highlighter-rouge">http://&lt;ip-address&gt;/Q</code>. This function goes through all known parameters by BSB-LAN for all supported heat pumps and it will search for parameters supported by the heat pump but unknown to BSB-LAN. To help with the project, please report these results to the BSB-LAN people by e-mail as mentioned on the BSB-LAN GitHub page.</p><p>Congratulations, your heat pump is now successfully connected to the network! Have fun browsing all the parameters, explore the HTTP calls you can make and see what else you can do with BSB-LAN.</p><blockquote class="prompt-danger"><div><p>Danger, BSB-LAN can be configured to also WRITE values to the heat pump from the configuration page. Please keep in mind that there are no checks or verifications done to avoid problems while writing values to the heat pump! There is nothing that will tell you if you make a mistake. Use at your own risk!</p></div></blockquote><h3 id="how-to-use"><span class="mr-2">How to use</span><a href="#how-to-use" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Now that BSB-LAN is fully functional, lets explore the possibilities. Clicking through the menu’s will fetch different parameters and their values, some might be more interesting than others and they will be per brand or per type of heat pump you have. Usually all the heat pump’s main parameters are documented in the user manual supplied with your heat pump. I’ve listed some of my most useful parameters to log below, please note the high 8000+ parameters are all diagnostics and can only be read, they are not settings:</p><div class="table-wrapper"><table><thead><tr><th style="text-align: left">Parameter<th style="text-align: left">Description<th style="text-align: left"> <th style="text-align: left">Parameter<th style="text-align: left">Description<tbody><tr><td style="text-align: left">500<td style="text-align: left">Time Program HC1 Mo<td style="text-align: left"> <td style="text-align: left">1610<td style="text-align: left">DHW temp nominal setpoint<tr><td style="text-align: left">501<td style="text-align: left">Time Program HC1 Tu<td style="text-align: left"> <td style="text-align: left">1612<td style="text-align: left">DHW temp reduced setpoint<tr><td style="text-align: left">502<td style="text-align: left">Time Program HC1 We<td style="text-align: left"> <td style="text-align: left">1640<td style="text-align: left">Legionella function<tr><td style="text-align: left">503<td style="text-align: left">Time Program HC1 Th<td style="text-align: left"> <td style="text-align: left">1642<td style="text-align: left">Legionella function day<tr><td style="text-align: left">504<td style="text-align: left">Time Program HC1 Fr<td style="text-align: left"> <td style="text-align: left">1644<td style="text-align: left">Legionella function time<tr><td style="text-align: left">505<td style="text-align: left">Time Program HC1 Sa<td style="text-align: left"> <td style="text-align: left">1645<td style="text-align: left">Legionella function setpoint<tr><td style="text-align: left">506<td style="text-align: left">Time Program HC1 Su<td style="text-align: left"> <td style="text-align: left">8700<td style="text-align: left">Outside temp sensor<tr><td style="text-align: left">560<td style="text-align: left">Time Program 4 DHW Mo<td style="text-align: left"> <td style="text-align: left">8701<td style="text-align: left">Lowest historic outside temp<tr><td style="text-align: left">561<td style="text-align: left">Time Program 4 DHW Tu<td style="text-align: left"> <td style="text-align: left">8702<td style="text-align: left">Highest historic outside temp<tr><td style="text-align: left">562<td style="text-align: left">Time Program 4 DHW We<td style="text-align: left"> <td style="text-align: left">8703<td style="text-align: left">Outside temp attenuated (24h avg)<tr><td style="text-align: left">563<td style="text-align: left">Time Program 4 DHW Th<td style="text-align: left"> <td style="text-align: left">8830<td style="text-align: left">DHW temp actual value top<tr><td style="text-align: left">564<td style="text-align: left">Time Program 4 DHW Fr<td style="text-align: left"> <td style="text-align: left">8831<td style="text-align: left">DHW temp current setpoint<tr><td style="text-align: left">565<td style="text-align: left">Time Program 4 DHW Sa<td style="text-align: left"> <td style="text-align: left">8744<td style="text-align: left">Flow temperature setpoint<tr><td style="text-align: left">566<td style="text-align: left">Time Program 4 DHW Su<td style="text-align: left"> <td style="text-align: left">8412<td style="text-align: left">Flow temperature supply<tr><td style="text-align: left">700<td style="text-align: left">Operating Mode<td style="text-align: left"> <td style="text-align: left">8410<td style="text-align: left">Flow temperature return<tr><td style="text-align: left">710<td style="text-align: left">Room temp Comfort setpoint<td style="text-align: left"> <td style="text-align: left">8450<td style="text-align: left">Operating hours compressor<tr><td style="text-align: left">712<td style="text-align: left">Room temp Reduced setpoint<td style="text-align: left"> <td style="text-align: left">8451<td style="text-align: left">Compressor start count<tr><td style="text-align: left">730<td style="text-align: left">Summer/winter changeover temp<td style="text-align: left"> <td style="text-align: left">8000<td style="text-align: left">Status heating circuit 1<tr><td style="text-align: left">740<td style="text-align: left">HC1 Flow temp min limitation<td style="text-align: left"> <td style="text-align: left">8003<td style="text-align: left">Status - Status DHW<tr><td style="text-align: left">741<td style="text-align: left">HC1 Flow temp max limitation<td style="text-align: left"> <td style="text-align: left">8006<td style="text-align: left">Status - Status Heat Pump<tr><td style="text-align: left"> <td style="text-align: left"> <td style="text-align: left"> <td style="text-align: left">8336<td style="text-align: left">Heat Pump total operating hours</table></div><p>Apart from these values, you might want to start automating things through the HTTP commands function. This is set up quite simple, as you can just go to the specific URL with an above parameter included to query or set values accordingly. I will not dedicate a lot of time to this in this guide as I don’t use BSB-LAN this way and I have no experience with it (I use MQTT). Please have a look at the <a href="https://1coderookie.github.io/BSB-LPB-LAN_EN/chap05.html#51-url-commands" target="_blank" rel="noopener noreferrer">BSB-LAN URL commands documentation ⧉</a> for all HTTP/URL commands available.</p><h2 id="conclusion"><span class="mr-2">Conclusion</span><a href="#conclusion" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>That concludes this post and guide, please feel free to send me feedback or ask any additional questions. You can contact me through the comments section, GitHub discussions or join our <a href="https://discord.gg/v8Bwbnb3xe" target="_blank" rel="noopener noreferrer">Discord for realtime chat ⧉</a>. If you find any errors please open up an issue using this link <a href="https://github.com/MattsTechInfo/mattstechinfo.github.io/issues" target="_blank" rel="noopener noreferrer">create an issue ⧉</a> and I will have a look! If you feel you are missing parts in the guide or if you ran into problems I’m also happy to add that information.</p><p>If you are interested in how I included the heatpump in my monitoring system, please see the following guide: <a href="/posts/fujitsu-bsblan-monitoring/">Fujitsu BSB-LAN Monitoring</a></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/home-automation/'>Home-Automation</a>, <a href='/categories/heating/'>Heating</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/home-automation/" class="post-tag no-text-decoration" >home-automation</a> <a href="/tags/domotica/" class="post-tag no-text-decoration" >domotica</a> <a href="/tags/heating/" class="post-tag no-text-decoration" >heating</a> <a href="/tags/documentation/" class="post-tag no-text-decoration" >documentation</a> <a href="/tags/tutorial/" class="post-tag no-text-decoration" >tutorial</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Fujitsu+Waterstage+home+automation%2Fdomotica+-+Matts%27+Tech+Info&url=https%3A%2F%2Fmattstech.info%2Fposts%2Ffujitsu-waterstage-domotica%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Fujitsu+Waterstage+home+automation%2Fdomotica+-+Matts%27+Tech+Info&u=https%3A%2F%2Fmattstech.info%2Fposts%2Ffujitsu-waterstage-domotica%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fmattstech.info%2Fposts%2Ffujitsu-waterstage-domotica%2F&text=Fujitsu+Waterstage+home+automation%2Fdomotica+-+Matts%27+Tech+Info" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/nvme-ssd-not-recognized-update/">NVMe SSD not recognized - Update</a><li><a href="/posts/big-tesla-update/">Big update for older Tesla's just dropped! (2022.8.10.5)</a><li><a href="/posts/fujitsu-waterstage-domotica/">Fujitsu Waterstage home automation/domotica</a><li><a href="/posts/fujitsu-bsblan-monitoring/">Fujitsu BSB-LAN Monitoring</a><li><a href="/posts/save-with-instant-heaters/">Saving Energy - Close-in boiler or instant heater?</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/vmware/">vmware</a> <a class="post-tag" href="/tags/documentation/">documentation</a> <a class="post-tag" href="/tags/events/">events</a> <a class="post-tag" href="/tags/tutorial/">tutorial</a> <a class="post-tag" href="/tags/homelab/">homelab</a> <a class="post-tag" href="/tags/esxi/">esxi</a> <a class="post-tag" href="/tags/vmworld/">vmworld</a> <a class="post-tag" href="/tags/storage/">storage</a> <a class="post-tag" href="/tags/blog/">blog</a> <a class="post-tag" href="/tags/nvme/">nvme</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div><script type='text/javascript' src='/assets/js/dist/custom.js'></script><div id="kofi-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Is this helpful? <script type='text/javascript' src='https://storage.ko-fi.com/cdn/widget/Widget_2.js'></script><script type='text/javascript'>kofiwidget2.init('Support Me on Ko-fi', '#42424247', 'L4L4EW4I7');kofiwidget2.draw();</script></div></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div class="post-navigation d-flex justify-content-between"> <a href="/posts/new-blog-setup/" class="btn btn-outline-primary" prompt="Older"><p>New blog setup</p></a> <a href="/posts/fujitsu-bsblan-monitoring/" class="btn btn-outline-primary" prompt="Newer"><p>Fujitsu BSB-LAN Monitoring</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "mattstechinfo/mattstechinfo.github.io", "data-repo-id": "R_kgDOHfb7oA", "data-category": "Comments", "data-category-id": "DIC_kwDOHfb7oM4CPx9S", "data-mapping": "title", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "top", "data-lang": "en", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/MattsBos">Matts Bos</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/vmware/">vmware</a> <a class="post-tag" href="/tags/documentation/">documentation</a> <a class="post-tag" href="/tags/events/">events</a> <a class="post-tag" href="/tags/tutorial/">tutorial</a> <a class="post-tag" href="/tags/homelab/">homelab</a> <a class="post-tag" href="/tags/esxi/">esxi</a> <a class="post-tag" href="/tags/vmworld/">vmworld</a> <a class="post-tag" href="/tags/storage/">storage</a> <a class="post-tag" href="/tags/blog/">blog</a> <a class="post-tag" href="/tags/nvme/">nvme</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script>
