<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Fujitsu BSB-LAN Monitoring" /><meta property="og:locale" content="en" /><meta name="description" content="Introduction In the last blog post (Fujitsu Waterstage home automation/domotica) I talked about monitoring my Fujitsu Waterstage using the BSB-LAN appliance. This post will explain the specifics on how I set this up within my environment. Although I will be sharing all my files and configs from multiple applications as examples, I’m 100% sure that there are better ways to set up the Node-Red flow more efficient, as I just did this quick and dirty." /><meta property="og:description" content="Introduction In the last blog post (Fujitsu Waterstage home automation/domotica) I talked about monitoring my Fujitsu Waterstage using the BSB-LAN appliance. This post will explain the specifics on how I set this up within my environment. Although I will be sharing all my files and configs from multiple applications as examples, I’m 100% sure that there are better ways to set up the Node-Red flow more efficient, as I just did this quick and dirty." /><link rel="canonical" href="https://mattstech.info/posts/fujitsu-bsblan-monitoring/" /><meta property="og:url" content="https://mattstech.info/posts/fujitsu-bsblan-monitoring/" /><meta property="og:site_name" content="Matts’ Tech Info" /><meta property="og:image" content="https://mattstech.info/assets/img/posts/headers/fujitsu-monitoring.jpg" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-08-26T19:25:11+02:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://mattstech.info/assets/img/posts/headers/fujitsu-monitoring.jpg" /><meta property="twitter:title" content="Fujitsu BSB-LAN Monitoring" /><meta name="twitter:site" content="@MattsTechInfo" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-09-11T19:26:40+02:00","datePublished":"2022-08-26T19:25:11+02:00","description":"Introduction In the last blog post (Fujitsu Waterstage home automation/domotica) I talked about monitoring my Fujitsu Waterstage using the BSB-LAN appliance. This post will explain the specifics on how I set this up within my environment. Although I will be sharing all my files and configs from multiple applications as examples, I’m 100% sure that there are better ways to set up the Node-Red flow more efficient, as I just did this quick and dirty.","headline":"Fujitsu BSB-LAN Monitoring","image":"https://mattstech.info/assets/img/posts/headers/fujitsu-monitoring.jpg","mainEntityOfPage":{"@type":"WebPage","@id":"https://mattstech.info/posts/fujitsu-bsblan-monitoring/"},"url":"https://mattstech.info/posts/fujitsu-bsblan-monitoring/"}</script><title>Fujitsu BSB-LAN Monitoring | Matts' Tech Info</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Matts' Tech Info"><meta name="application-name" content="Matts' Tech Info"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script async src="https://stats.mattstech.info/visitors" data-website-id="6b086229-ba9b-48e4-970c-e94e6bef8b8e"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/logo-white-bg.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Matts' Tech Info</a></div><div class="site-subtitle font-italic">Sharing about all things tech!</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>BLOG</span> </a><li class="nav-item"> <a href="/projects/" class="nav-link"> <i class="fa-fw fas fa-cubes ml-xl-3 mr-xl-3 unloaded"></i> <span>PROJECTS</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/MattsTechInfo" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://discord.gg/v8Bwbnb3xe" aria-label="discord" target="_blank" rel="noopener"> <i class="fab fa-discord"></i> </a> <a href="https://twitter.com/MattsTechInfo" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href="/feed.xml" aria-label="rss" target="_blank" rel="noopener"> <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Blog </a> </span> <span>Fujitsu BSB-LAN Monitoring</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Fujitsu BSB-LAN Monitoring</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1661534711" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Aug 26, 2022 </em> </span> <span> Updated <em class="" data-ts="1662917200" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Sep 11, 2022 </em> </span><div class="mt-3 mb-3"> <img data-src="/assets/img/posts/headers/fujitsu-monitoring.jpg" class="preview-img bg" alt="Preview Image" data-proofer-ignore></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/MattsBos">Matts Bos</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3262 words"> <em>18 min</em> read</span></div></div></div><div class="post-content"><h2 id="introduction"><span class="mr-2">Introduction</span><a href="#introduction" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>In the last blog post (<a href="/posts/fujitsu-waterstage-domotica/">Fujitsu Waterstage home automation/domotica</a>) I talked about monitoring my Fujitsu Waterstage using the BSB-LAN appliance. This post will explain the specifics on how I set this up within my environment. Although I will be sharing all my files and configs from multiple applications as examples, I’m 100% sure that there are better ways to set up the Node-Red flow more efficient, as I just did this quick and dirty.</p><blockquote class="prompt-warning"><div><p>Somewhere during 2021 InfluxData released their new Flux system based on InfluxDB 2.0. Since this is a big change essentially forcing me to rewrite all my Grafana dashboards and scripts to update to the latest version, I haven’t done that yet. If you are starting with a blank page, my advice would be to use InfluxDB 2.0 and rewrite my examples from InfluxQL to Flux. Even though this guide will lose its copy paste value, this will save you a LOT of time in the future redoing everything like I will have to.</p></div></blockquote><h2 id="guide"><span class="mr-2">Guide</span><a href="#guide" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="goals"><span class="mr-2">Goals</span><a href="#goals" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>This post will explain the following:</p><ul><li>Configure MQTT in BSB-LAN.<li>Verify the data is received on the MQTT server.<li>Create a new InfluxDB database and user.<li>Leverage Node-Red to read the MQTT messages and write them to InfluxDB.<li>Use Grafana to connect to the database and create a dashboard.</ul><h3 id="requirements"><span class="mr-2">Requirements</span><a href="#requirements" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Before we continue, lets set up a list of requirements.</p><blockquote class="prompt-info"><div><p>This guide expects the following services to be present and running on your network. I will not explain setting up every single service in this guide. There are hundreds of setup guides and documentation is readily available for these well-known services, please make sure they are running before continuing.</p></div></blockquote><dl><dt>MQTT server<dd>An MQTT server is required to receive and distribute messages sent by BSB-LAN. I am using <a href="https://hub.docker.com/_/eclipse-mosquitto" target="_blank" rel="noopener noreferrer">Mosquitto ⧉</a> running in a container.<dt>InfluxDB<dd>InfluxDB is a time series database which will store the sensor data coming from BSB-LAN, which can be consumed by Grafana. This post is based on InfluxDB 1.7 running in my environment, any version using InfluxQL should work without modifications.<dt>Node-Red<dd>Node-Red is a visual flow-based programming tool which I will be using to read BSB-LAN data from the MQTT server, modify the datastructure and inject the data into the InfluxDB. My <a href="https://hub.docker.com/r/nodered/node-red" target="_blank" rel="noopener noreferrer">Node-Red ⧉</a> is running in a container.<dt>Grafana<dd>The actual dashboarding program to visualize the sensor data coming from the heatpump/BSB-LAN. It connects to the database for sensor data. Just like the others, my <a href="https://hub.docker.com/r/grafana/grafana" target="_blank" rel="noopener noreferrer">Grafana ⧉</a> runs in a container.</dl><h3 id="configure-bsb-lan-to-mqtt-logging"><span class="mr-2">Configure BSB-LAN to MQTT Logging</span><a href="#configure-bsb-lan-to-mqtt-logging" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><dl><dt>Step 1<dd>One of the first things that’s required for MQTT to even work on the BSB-LAN device is a change in the configuration. In the original guide I mentioned this as an optional step to prepare MQTT. If you have already done that optional step, feel free to skip to Step 3. <br /> First, open up the BSB-LAN Arduino project and find the BSB-LAN configuration file <code class="language-plaintext highlighter-rouge">BSB_LAN/BSB_LAN_config.h</code>. Within this file there is a section dedicated to MQTT. The values to edit will be:<ul><li><code class="language-plaintext highlighter-rouge">mqtt_mode</code> - To tell BSB-LAN to use MQTT and also which format to use, I use the plain text format for my setup.<li><code class="language-plaintext highlighter-rouge">mqtt_broker_ip_addr[4]</code> - Configure the IP address of the MQTT server on the network.<li><code class="language-plaintext highlighter-rouge">MQTTUsername[32]</code> - Set a username if authentication is required, leave blank for no authentication.<li><code class="language-plaintext highlighter-rouge">MQTTPassword[32]</code> - Set a password if authentication is required, leave blank for no authentication.<li><code class="language-plaintext highlighter-rouge">MQTTTopicPrefix[32]</code> - Set the topic of the messages, this basically sorts all values in a folder like structure instead of just dumping them all in the MQTT server root.<li><code class="language-plaintext highlighter-rouge">MQTTDeviceID[32]</code> - Gives the BSB-LAN client a name, change this if you have multiple BSB-LAN devices.</ul></dl><p>What the config file looks like for me:</p><div file="BSB_LAN/BSB_LAN_config.h" class="language-objc highlighter-rouge"><div class="code-header"> <span data-label-text="BSB_LAN/BSB_LAN_config.h"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="cp">#define MQTT
</span><span class="n">byte</span> <span class="n">mqtt_mode</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// MQTT: 0 - disabled, 1 - send messages in plain text format, 2 - send messages in JSON format, 3 - send messages in rich JSON format. Use this if you want a json package of your logging information printed to the mqtt topic</span>
<span class="c1">// JSON payload will be of the structure: {"MQTTDeviceID": {"status":{"log_param1":"value1"}}}</span>
<span class="c1">// rich JSON payload will be of the structure: {"MQTTDeviceID": {"id": "parmeter number from log values", "name": "parameter name from logvalues", "value": "query result", "desc": "enum value description", "unit": "unit of measurement", "error", error code}}</span>
<span class="n">byte</span> <span class="n">mqtt_broker_ip_addr</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">192</span><span class="p">,</span><span class="mi">168</span><span class="p">,</span><span class="mi">55</span><span class="p">,</span><span class="mi">54</span><span class="p">};</span> <span class="c1">// MQTT broker ip address. Please use commas instead of dots!!!</span>
<span class="kt">char</span> <span class="n">MQTTUsername</span><span class="p">[</span><span class="mi">32</span><span class="p">]</span> <span class="o">=</span> <span class="s">""</span><span class="p">;</span>                 <span class="c1">// Set username for MQTT broker here or set empty string if no username/password is used.</span>
<span class="kt">char</span> <span class="n">MQTTPassword</span><span class="p">[</span><span class="mi">32</span><span class="p">]</span> <span class="o">=</span> <span class="s">""</span><span class="p">;</span>                 <span class="c1">// Set password for MQTT broker here or set empty string if no password is used.</span>
<span class="kt">char</span> <span class="n">MQTTTopicPrefix</span><span class="p">[</span><span class="mi">32</span><span class="p">]</span> <span class="o">=</span> <span class="s">"BSB-LAN"</span><span class="p">;</span> 	        <span class="c1">// Optional: Choose the "topic" for MQTT messages here. In case of empty string, default topic name will be used</span>

<span class="c1">// Optional: Define a device name to use as header in json payload. In case of empty string, "BSB-LAN" will be used.</span>
<span class="c1">// This value is also used as a client ID towards the MQTT broker, change it if you have more than one BSB-LAN on your broker.</span>
<span class="kt">char</span> <span class="n">MQTTDeviceID</span><span class="p">[</span><span class="mi">32</span><span class="p">]</span> <span class="o">=</span> <span class="s">"BSB-LAN"</span><span class="p">;</span>
</pre></table></code></div></div><dl><dt>Step 2<dd>Because of the changes in the Arduino project config file, the project must be rebuilt and uploaded to the microcontroller. There are two ways of doing this:<br /><ol><li>Locally connected.<br /> Just like the original guide, connect the microcontroller to your computer through USB and flash it through the serial connection. Disconnecting it from the heatpump is not necessary. Make sure your IDE still has the correct COM port selected (these change sometimes!). From Arduino IDE select <code class="language-plaintext highlighter-rouge">Sketch-&gt;Upload</code> and things should be underway. Immediately after open the Serial monitor under <code class="language-plaintext highlighter-rouge">Tools-&gt;Serial Monitor</code> to see the feedback from the microcontroller during startup. Make sure it’s online and we’re done.<li>Over the air (ESP32 Only!).<br /> BSB-LAN has the posibility to do an OTA flash. Please make sure the BSB-LAN setting <code class="language-plaintext highlighter-rouge">General - OTA Update</code> in the webbrowser is defined as <code class="language-plaintext highlighter-rouge">On</code> before doing this. From Arduino IDE select <code class="language-plaintext highlighter-rouge">Sketch-&gt;Export compiled Binary</code> to build and save the .bin file on your computer (mine is called <code class="language-plaintext highlighter-rouge">BSB_LAN.ino.esp32-evb.bin</code>). Now go to <code class="language-plaintext highlighter-rouge">&lt;your-BSB-LAN-IP&gt;:8080</code> in the browser, click <code class="language-plaintext highlighter-rouge">Choose File</code> and select the .bin file you just exported, followed by clicking <code class="language-plaintext highlighter-rouge">Update</code>. If everything goes well, your BSB-LAN should be back online after a few minutes. If for any reason it bricks, there is no other option than locally flashing it again.</ol><dt>Step 3<dd>Before we configure BSB-LAN to actually start sending logs to MQTT (if you followed my install guide, logging will be set to <code class="language-plaintext highlighter-rouge">false</code>), it’s time to figure out which parameters we actually want to log. The way I did this was to bring up the technical manual of my heatpump and find all the parameters I want to see. I ended up with the following parameters and entered them into the BSB-LAN web config under <code class="language-plaintext highlighter-rouge">Logging - Parameters</code>. <br /> Parameters:<div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>500,501,502,503,504,505,506,560,561,562,563,564,565,566,700,710,712,730,740,741,1602,1610,1612,1640,1642,1644,1645,8700,8701,8702,8703,8830,8831,8744,8412,8410,8395,8396,8397,8398,8450,8451,8000,8003,8006,8336
</pre></table></code></div></div><p><img data-src="/assets/img/posts/fujitsu-bsblan-monitoring/logging-parameters.png" alt="Parameter config" data-proofer-ignore> And for reference, what these parameters do for my Fujitsu Waterstage:</p></dl><div class="table-wrapper"><table><thead><tr><th style="text-align: left">Parameter<th style="text-align: left">Description<th style="text-align: left"> <th style="text-align: left">Parameter<th style="text-align: left">Description<tbody><tr><td style="text-align: left">500<td style="text-align: left">Time Program HC1 Mo<td style="text-align: left"> <td style="text-align: left">1610<td style="text-align: left">DHW temp nominal setpoint<tr><td style="text-align: left">501<td style="text-align: left">Time Program HC1 Tu<td style="text-align: left"> <td style="text-align: left">1612<td style="text-align: left">DHW temp reduced setpoint<tr><td style="text-align: left">502<td style="text-align: left">Time Program HC1 We<td style="text-align: left"> <td style="text-align: left">1640<td style="text-align: left">Legionella function<tr><td style="text-align: left">503<td style="text-align: left">Time Program HC1 Th<td style="text-align: left"> <td style="text-align: left">1642<td style="text-align: left">Legionella function day<tr><td style="text-align: left">504<td style="text-align: left">Time Program HC1 Fr<td style="text-align: left"> <td style="text-align: left">1644<td style="text-align: left">Legionella function time<tr><td style="text-align: left">505<td style="text-align: left">Time Program HC1 Sa<td style="text-align: left"> <td style="text-align: left">1645<td style="text-align: left">Legionella function setpoint<tr><td style="text-align: left">506<td style="text-align: left">Time Program HC1 Su<td style="text-align: left"> <td style="text-align: left">8700<td style="text-align: left">Outside temp sensor<tr><td style="text-align: left">560<td style="text-align: left">Time Program 4 DHW Mo<td style="text-align: left"> <td style="text-align: left">8701<td style="text-align: left">Lowest historic outside temp<tr><td style="text-align: left">561<td style="text-align: left">Time Program 4 DHW Tu<td style="text-align: left"> <td style="text-align: left">8702<td style="text-align: left">Highest historic outside temp<tr><td style="text-align: left">562<td style="text-align: left">Time Program 4 DHW We<td style="text-align: left"> <td style="text-align: left">8703<td style="text-align: left">Outside temp attenuated (24h avg)<tr><td style="text-align: left">563<td style="text-align: left">Time Program 4 DHW Th<td style="text-align: left"> <td style="text-align: left">8830<td style="text-align: left">DHW temp actual value top<tr><td style="text-align: left">564<td style="text-align: left">Time Program 4 DHW Fr<td style="text-align: left"> <td style="text-align: left">8831<td style="text-align: left">DHW temp current setpoint<tr><td style="text-align: left">565<td style="text-align: left">Time Program 4 DHW Sa<td style="text-align: left"> <td style="text-align: left">8744<td style="text-align: left">Flow temperature setpoint<tr><td style="text-align: left">566<td style="text-align: left">Time Program 4 DHW Su<td style="text-align: left"> <td style="text-align: left">8412<td style="text-align: left">Flow temperature supply<tr><td style="text-align: left">700<td style="text-align: left">Operating Mode<td style="text-align: left"> <td style="text-align: left">8410<td style="text-align: left">Flow temperature return<tr><td style="text-align: left">710<td style="text-align: left">Room temp Comfort setpoint<td style="text-align: left"> <td style="text-align: left">8450<td style="text-align: left">Operating hours compressor<tr><td style="text-align: left">712<td style="text-align: left">Room temp Reduced setpoint<td style="text-align: left"> <td style="text-align: left">8451<td style="text-align: left">Compressor start count<tr><td style="text-align: left">730<td style="text-align: left">Summer/winter changeover temp<td style="text-align: left"> <td style="text-align: left">8000<td style="text-align: left">Status heating circuit 1<tr><td style="text-align: left">740<td style="text-align: left">HC1 Flow temp min limitation<td style="text-align: left"> <td style="text-align: left">8003<td style="text-align: left">Status - Status DHW<tr><td style="text-align: left">741<td style="text-align: left">HC1 Flow temp max limitation<td style="text-align: left"> <td style="text-align: left">8006<td style="text-align: left">Status - Status Heat Pump<tr><td style="text-align: left"> <td style="text-align: left"> <td style="text-align: left"> <td style="text-align: left">8336<td style="text-align: left">Heat Pump total operating hours</table></div><dl><dt>Step 4<dd>With the parameters all configured we have to think about the interval at which BSB-LAN will send sensor data to MQTT. At first I thought, well, lets do this every 5 seconds! Unfortunately, that’s not going to work. As mentioned in the previous guide, the BSB protocol is very low bitrate. Depending on your heatpump it may take up to a full second to retrieve a parameter value from the heatpump. My current setup, with the parameters above, takes about 25 seconds to complete. With my initial idea of a 5 second interval, BSB-LAN would crash as it started a new interval before the last task was finished.<br /> So with 40+ parameters to log taking around 25 seconds, I settled with an interval of 30 seconds, giving around 5 seconds to spare before starting the new interval.</dl><blockquote class="prompt-info"><div><p>Keep in mind that BSB-LAN is a single process project. When BSB-LAN is busy polling and logging the parameters the webinterface and all other functions will be queued. In case of my setup, BSB-LAN will be unresponsive for 25 seconds and then function for 5 seconds before entering the 25 seconds unresponsiveness again in a loop. Play with the interval or the number of parameters to adjust this to your liking.</p></div></blockquote><dl><dt>Step 5<dd>Verify the configuration in the webbrowser and switch the <code class="language-plaintext highlighter-rouge">Logging - Logging enabled</code> option to <code class="language-plaintext highlighter-rouge">On</code>. It should look something like the screenshot below. If all is well, press the <code class="language-plaintext highlighter-rouge">Save parameter</code> button on the bottom of the configuration page to enable it all. <img data-src="/assets/img/posts/fujitsu-bsblan-monitoring/webconfig-overview.png" alt="Webconfig Overview" data-proofer-ignore><dt>Step 6<dd>The last step is to verify the sensor data actually reaching the MQTT server. I use an awesome free small program called <a href="http://mqtt-explorer.com/" target="_blank" rel="noopener noreferrer">MQTT Explorer ⧉</a>. To give you an idea what it should look like:</dl><p><img data-src="/assets/img/posts/fujitsu-bsblan-monitoring/mqtt-overview.png" alt="MQTT Overview" data-proofer-ignore></p><h3 id="set-up-influxdb"><span class="mr-2">Set up InfluxDB</span><a href="#set-up-influxdb" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>When it comes to storing data, I like to keep my different types of sensor data in seperate databases. This is nothing more than preference and as far as I know has nothing to do with best practices. What I’ve done is create a new database on my InfluxDB system with a dedicated user and password. Also, my InfluxDB is still running in a VM, so I have easy access to the CLI to do database maintenance. You can also use external management tools or API calls with cURL, if you want to do that, the answer is a Google query away. I will explain the CLI option here.</p><p>There aren’t a lot of things to do, so lets get into it:</p><ol><li>Log on to the InfluxDB system to get to the CLI.</ol><blockquote class="prompt-warning"><div><p>In the following step I’m authenticating with plain-text passwords in the shell. Please keep in mind that this is a possible security breach as the system shell command history will show your plain-text password for anyone on the system. In any production environment, please log on with encrypted passwords or use the “auth” command inside the InfluxQL CLI to avoid this.</p></div></blockquote><ol><li>Type <code class="language-plaintext highlighter-rouge">influx -username admin -password &lt;password&gt;</code>, this should be the admin account you set up during installation, if you set it up without user, no authentication is required throughout the following steps, but I recommend setting it up.<div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="gp">matts@influxdb:~$</span><span class="w"> </span>influx <span class="nt">-username</span> admin <span class="nt">-password</span> &lt;password&gt;
<span class="go">Connected to http://localhost:8086 version 1.7.6
InfluxDB shell version: 1.7.6
Enter an InfluxQL query
</span><span class="gp">&gt;</span><span class="w">
</span></pre></table></code></div></div><li>Create a new database with <code class="language-plaintext highlighter-rouge">CREATE DATABASE &lt;databasename&gt;</code>, I will use ‘heatpump’ as DB name.<div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="gp">&gt;</span><span class="w"> </span>CREATE DATABASE heatpump
<span class="gp">&gt;</span><span class="w">
</span></pre></table></code></div></div><li>Verify it has been added with <code class="language-plaintext highlighter-rouge">SHOW DATABASES</code>.<div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="gp">&gt;</span><span class="w"> </span>SHOW DATABASES
<span class="go">name: databases
name
----
_internal
heatpump
</span></pre></table></code></div></div><li>Create a database user with <code class="language-plaintext highlighter-rouge">CREATE USER &lt;username&gt; WITH PASSWORD '&lt;password&gt;'</code>. I create a user called heatpump_dbsa (heatpump as the database name and _dbsa short for database service account, just a little naming convention)<div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="gp">&gt;</span><span class="w"> </span>CREATE USER heatpump_dbsa WITH PASSWORD <span class="s1">'123456'</span>
<span class="gp">&gt;</span><span class="w">
</span></pre></table></code></div></div><li>Verify user has been added with <code class="language-plaintext highlighter-rouge">SHOW USERS</code>.<div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="gp">&gt;</span><span class="w"> </span>SHOW USERS
<span class="go">user                admin
----                -----
admin               true
heatpump_dbsa       false
</span></pre></table></code></div></div><li>Finally, assign rights for the created user to allow database access using <code class="language-plaintext highlighter-rouge">GRANT ALL ON "&lt;databasename&gt;" TO "&lt;username&gt;"</code>.<div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="gp">&gt;</span><span class="w"> </span>GRANT ALL ON <span class="s2">"heatpump"</span> TO <span class="s2">"heatpump_dbsa"</span>
<span class="gp">&gt;</span><span class="w">
</span></pre></table></code></div></div><li>Verify with <code class="language-plaintext highlighter-rouge">SHOW GRANTS FOR "&lt;username&gt;"</code><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="gp">&gt;</span><span class="w"> </span>SHOW GRANTS FOR <span class="s2">"heatpump_dbsa"</span>
<span class="go">database  privilege
--------  ---------
heatpump  ALL PRIVILEGES
</span><span class="gp">&gt;</span><span class="w">
</span></pre></table></code></div></div></ol><h3 id="set-up-node-red-flows"><span class="mr-2">Set up Node-Red flows</span><a href="#set-up-node-red-flows" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>I use Node-Red for any automation and logic that’s required to make things work together. In this case a Node-Red workflow will be used to transform the messages from MQTT to something that can be saved to the InfluxDB database. What I’ve set up is a very simple flow to do exactly what I need with static values and duplicated this for each parameter. This is very basic and not as efficient as it can be. Ideally, it would be a single flow that would dynamically load the parameters and write the correct values to the database. My programming/scripting skills are not that great and the solution is quite ugly in my opnion, but it does the job. If you have any tips or examples, feel free to show me!</p><p>Node-Red flows consist of nodes, this flow requires one additional node that needs to be installed, it’s in the InfluxDB nodes package. To install this package, press the hamburger menu (top right) and go to <code class="language-plaintext highlighter-rouge">Manage palette</code>. A menu opens with two tabs named <code class="language-plaintext highlighter-rouge">Nodes</code> and <code class="language-plaintext highlighter-rouge">Install</code>, go to <code class="language-plaintext highlighter-rouge">Install</code>. In the searchbar type <code class="language-plaintext highlighter-rouge">influx</code>, find <code class="language-plaintext highlighter-rouge">node-red-contrib-influxdb</code> in the list and click the <code class="language-plaintext highlighter-rouge">install</code> button (As I have already installed it, it says <code class="language-plaintext highlighter-rouge">installed</code>). <img data-src="/assets/img/posts/fujitsu-bsblan-monitoring/influxdb-node.png" alt="InfluxDB Node" data-proofer-ignore></p><p>To give you a headstart I’ve created an importable copy of my own flows, since the JSON file is quite large please grab it from the <a href="https://github.com/MattsTechInfo/kickstart/blob/main/home-automation/BSB-LAN%20Monitoring/node-red-flows.json" target="_blank" rel="noopener noreferrer">MattsTechInfo/kickstart repository ⧉</a>.</p><p>Once again in Node-Red, press the hamburger menu (top right) and go to <code class="language-plaintext highlighter-rouge">Import</code>. Copy the JSON code from the file linked above and paste it into the text area, or, download the <code class="language-plaintext highlighter-rouge">node-red-flows.json</code> file and upload it. Also select <code class="language-plaintext highlighter-rouge">Import to: new flow</code>. You can now drop all the nodes onto the canvas by clicking when they are in a position you like.</p><p>Now there are two configuration nodes that have to be edited, the MQTT server/broker and the InfluxDB server.</p><ol><li>MQTT<ul><li>On the top-right there is an Info button which should be opened by default, if not, click it.<li>In the flows and nodes tree below that, find the <code class="language-plaintext highlighter-rouge">MQTT Server</code> configuration node and double click it. (<code class="language-plaintext highlighter-rouge">Global Configuration Nodes -&gt; mqtt broker -&gt; MQTT Server</code>) The configuration panel will open.<li>Replace the <code class="language-plaintext highlighter-rouge">Server</code>, which currently says <code class="language-plaintext highlighter-rouge">replaceme</code>, with the DNS or IP adress to your MQTT server.<li>Optional, rename the Client ID if you wish, I called it Node-Red.<li>Security: If your MQTT server requires TLS, please set the checkmark. If your MQTT server requires authentication, please set the user and password on the Security tab.<li>Press the <code class="language-plaintext highlighter-rouge">Update</code> button.<li>Your MQTT node is now configured.</ul><li>InfluxDB<ul><li>Just like the MQTT node, find the <code class="language-plaintext highlighter-rouge">[v1.x] InfluxDB - Heatpump</code> configuration node and double click it (<code class="language-plaintext highlighter-rouge">Global Configuration Nodes -&gt; influxdb -&gt; [v1.x] InfluxDB - Heatpump</code>)<li>Replace the <code class="language-plaintext highlighter-rouge">Host</code>, which currently says <code class="language-plaintext highlighter-rouge">replaceme</code>, with the DNS or IP address to your InfluxDB server.<li>Replace the <code class="language-plaintext highlighter-rouge">Database</code> if you gave it a different name before.<li>Set the username and password created during the setup InfluxDB section.<li>If you’ve configured InfluxDB to use SSL/TLS, please enable it here.<li>Press the <code class="language-plaintext highlighter-rouge">Update</code> button.<li>Your InfluxDB node is now configured.</ul></ol><p>The last step is to deploy the flows, this will mark the canvas as active within Node-Red and will start “working”. This can simply be done by pressing the big red <code class="language-plaintext highlighter-rouge">Deploy</code> on the top right next to the hamburger menu. Fun fact, this only turns red when you have active changes that differ from the currently deployed version. After every change you make in the future, be sure to press deploy or your changes will be gone.</p><p>If everything worked out you should see something like this (MQTT nodes should show green and connected, InfluxDB nodes show nothing unless it throws an error): <img data-src="/assets/img/posts/fujitsu-bsblan-monitoring/node-red-overview.png" alt="Node-Red overview" data-proofer-ignore></p><h3 id="building-the-grafana-dashboard"><span class="mr-2">Building the Grafana Dashboard</span><a href="#building-the-grafana-dashboard" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Now that all the sensor data is in InfluxDB, it can be converted to a visual dashboard using Grafana for a nice overview and all kinds of posibilities to view telemetry. Building Grafana dashboards takes a lot of time, but I love both the looks and functionality of a well thought out dashboard. Even though my current Heatpump dashboard is just the first iteration, it will show most interesting data for my Fujitsu Waterstage. Just like the Node-Red flows, you can also copy my dashboard to get a kickstart!</p><p>Before importing the dashboard Grafana needs a data source configured so data can be accessed after the dashboard import.</p><p><img data-src="/assets/img/posts/fujitsu-bsblan-monitoring/datasource-config.png" alt="Data Source config" style="max-width: 200px" class="right" data-proofer-ignore></p><ol><li>In the sidebar menu (on the left) press the Cog icon. The <code class="language-plaintext highlighter-rouge">Data Sources</code> page will be opened.<li>Click on the button <code class="language-plaintext highlighter-rouge">Add data source</code>.<li>Find and click <code class="language-plaintext highlighter-rouge">InfluxDB</code> under the <code class="language-plaintext highlighter-rouge">Time series databases</code> section.<li>Give your data source a name, I called mine <code class="language-plaintext highlighter-rouge">Heatpump</code>.<li>Select the <code class="language-plaintext highlighter-rouge">InfluxQL</code> query language.<li>Set the <code class="language-plaintext highlighter-rouge">URL</code> to your InfluxDB DNS name or IP address, make sure to include the port (add <code class="language-plaintext highlighter-rouge">:8086</code> for the default).<li>Activate <code class="language-plaintext highlighter-rouge">Basic auth</code>.<li>For the <code class="language-plaintext highlighter-rouge">Basic Auth Details</code> fill in the database user and password configured earlier (for me, that’s <code class="language-plaintext highlighter-rouge">heatpump_dbsa</code>).<li>Under <code class="language-plaintext highlighter-rouge">InfluxDB Details</code>, change the <code class="language-plaintext highlighter-rouge">Database</code> to <code class="language-plaintext highlighter-rouge">heatpump</code> or your own if you created a different one.<li>Don’t touch anything else and press <code class="language-plaintext highlighter-rouge">Save &amp; Test</code>.</ol><p>If everything was filled out correctly, you should see the following pop up: <img data-src="/assets/img/posts/fujitsu-bsblan-monitoring/datasource-working.png" alt="Data Source working" data-proofer-ignore></p><p>Now all that’s left to do is to import the dashboard JSON to Grafana. Again, the JSON file used for the import is quite large, please copy it from the <a href="https://github.com/MattsTechInfo/kickstart/blob/main/home-automation/BSB-LAN%20Monitoring/heatpump-grafana-dashboard.json" target="_blank" rel="noopener noreferrer">MattsTechInfo/kickstart repository ⧉</a>.</p><blockquote class="prompt-info"><div><p>If you’ve changed the name of the Data Source in the previous step, it must be changed in the Grafana Dashboard Panels as well. Changing the dashboard panel’s datasources one by one is quite tedious, I suggest opening the JSON in your favorite file editor and replacing <code class="language-plaintext highlighter-rouge">"datasource": "Heatpump"</code> with <code class="language-plaintext highlighter-rouge">"datasource": "yourdatasourcename"</code> before running the import.</p></div></blockquote><p>In the sidebar menu, hover over the + sign and click on <code class="language-plaintext highlighter-rouge">Import</code>. Copy the JSON code from the file linked above and paste it into the text area, or, download the <code class="language-plaintext highlighter-rouge">heatpump-grafana-dashboard.json</code> file and upload it. Press the <code class="language-plaintext highlighter-rouge">Load</code> button, a new page shows up where you can change the dashboard name and the folder to store the dashboard, press the <code class="language-plaintext highlighter-rouge">Import</code> button when ready. Your dashboard is now ready and should show your heatpump’s information! <img data-src="/assets/img/posts/headers/fujitsu-monitoring.jpg" alt="Grafana Dashboard" data-proofer-ignore></p><h2 id="conclusion"><span class="mr-2">Conclusion</span><a href="#conclusion" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Congratulations, you’ve got yourself a nice dashboard to monitor your heatpump. No more looking at the physical display in the utility room.</p><p>That concludes this post and guide, please feel free to send me feedback or ask any additional questions. You can contact me through the comments section, GitHub discussions or join our <a href="https://discord.gg/v8Bwbnb3xe" target="_blank" rel="noopener noreferrer">Discord for realtime chat ⧉</a>. If you find any errors please open up an issue using this link <a href="https://github.com/MattsTechInfo/mattstechinfo.github.io/issues" target="_blank" rel="noopener noreferrer">create an issue ⧉</a> and I will have a look! If you feel you are missing parts in the guide or if you ran into problems I’m also happy to add that information.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/home-automation/'>Home-Automation</a>, <a href='/categories/heating/'>Heating</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/home-automation/" class="post-tag no-text-decoration" >home-automation</a> <a href="/tags/domotica/" class="post-tag no-text-decoration" >domotica</a> <a href="/tags/heating/" class="post-tag no-text-decoration" >heating</a> <a href="/tags/documentation/" class="post-tag no-text-decoration" >documentation</a> <a href="/tags/tutorial/" class="post-tag no-text-decoration" >tutorial</a> <a href="/tags/grafana/" class="post-tag no-text-decoration" >grafana</a> <a href="/tags/influxdb/" class="post-tag no-text-decoration" >influxdb</a> <a href="/tags/mqtt/" class="post-tag no-text-decoration" >mqtt</a> <a href="/tags/node-red/" class="post-tag no-text-decoration" >node-red</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Fujitsu+BSB-LAN+Monitoring+-+Matts%27+Tech+Info&url=https%3A%2F%2Fmattstech.info%2Fposts%2Ffujitsu-bsblan-monitoring%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Fujitsu+BSB-LAN+Monitoring+-+Matts%27+Tech+Info&u=https%3A%2F%2Fmattstech.info%2Fposts%2Ffujitsu-bsblan-monitoring%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fmattstech.info%2Fposts%2Ffujitsu-bsblan-monitoring%2F&text=Fujitsu+BSB-LAN+Monitoring+-+Matts%27+Tech+Info" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/nvme-ssd-not-recognized-update/">NVMe SSD not recognized - Update</a><li><a href="/posts/big-tesla-update/">Big update for older Tesla's just dropped! (2022.8.10.5)</a><li><a href="/posts/fujitsu-waterstage-domotica/">Fujitsu Waterstage home automation/domotica</a><li><a href="/posts/fujitsu-bsblan-monitoring/">Fujitsu BSB-LAN Monitoring</a><li><a href="/posts/save-with-instant-heaters/">Saving Energy - Close-in boiler or instant heater?</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/vmware/">vmware</a> <a class="post-tag" href="/tags/documentation/">documentation</a> <a class="post-tag" href="/tags/events/">events</a> <a class="post-tag" href="/tags/tutorial/">tutorial</a> <a class="post-tag" href="/tags/homelab/">homelab</a> <a class="post-tag" href="/tags/esxi/">esxi</a> <a class="post-tag" href="/tags/vmworld/">vmworld</a> <a class="post-tag" href="/tags/storage/">storage</a> <a class="post-tag" href="/tags/blog/">blog</a> <a class="post-tag" href="/tags/nvme/">nvme</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div><script type='text/javascript' src='/assets/js/dist/custom.js'></script><div id="kofi-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Is this helpful? <script type='text/javascript' src='https://storage.ko-fi.com/cdn/widget/Widget_2.js'></script><script type='text/javascript'>kofiwidget2.init('Support Me on Ko-fi', '#42424247', 'L4L4EW4I7');kofiwidget2.draw();</script></div></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div class="post-navigation d-flex justify-content-between"> <a href="/posts/fujitsu-waterstage-domotica/" class="btn btn-outline-primary" prompt="Older"><p>Fujitsu Waterstage home automation/domotica</p></a> <a href="/posts/save-with-instant-heaters/" class="btn btn-outline-primary" prompt="Newer"><p>Saving Energy - Close-in boiler or instant heater?</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "mattstechinfo/mattstechinfo.github.io", "data-repo-id": "R_kgDOHfb7oA", "data-category": "Comments", "data-category-id": "DIC_kwDOHfb7oM4CPx9S", "data-mapping": "title", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "top", "data-lang": "en", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/MattsBos">Matts Bos</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/vmware/">vmware</a> <a class="post-tag" href="/tags/documentation/">documentation</a> <a class="post-tag" href="/tags/events/">events</a> <a class="post-tag" href="/tags/tutorial/">tutorial</a> <a class="post-tag" href="/tags/homelab/">homelab</a> <a class="post-tag" href="/tags/esxi/">esxi</a> <a class="post-tag" href="/tags/vmworld/">vmworld</a> <a class="post-tag" href="/tags/storage/">storage</a> <a class="post-tag" href="/tags/blog/">blog</a> <a class="post-tag" href="/tags/nvme/">nvme</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script>
